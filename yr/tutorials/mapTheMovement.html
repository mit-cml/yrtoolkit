<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>yrtoolkit</title>
  <link rel="stylesheet" href="../css/scrollstyle.css">
  <link rel="stylesheet" href="../css/style.css">
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  <script src="../scripts/utils.js"></script>
  <script>
    $(window).bind('resize', function() {
      console.log("window resized")
    });
  </script>
  
  <script>
    $( function() {
      $( ".accordion" ).accordion({heightStyle: "content"});
      $( ".widget input[type=submit], .widget a, .widget button" ).button();
    } );
  </script>
</head>
<body>

  <div style="width:100%;height: 50px;text-align:center;background-color: #f6f6f6;margin-bottom: 10px;">
    <div id="youthMobilePowerTab" style="float:left;height:40px;width:50%;background-color: #ccdea8;padding-top: 5px;padding-bottom: 5px;">Youth Mobile Power</div>
    <div id="howToTab" style="float:left;height:40px;width:50%;background-color: #f6f6f6;padding-top: 5px;padding-bottom: 5px;">How To</div>
  </div>

  <div id="youthRadioAccordion" class="accordion">
    <h3>The Challenge</h3>
    <div>
      <p>On the street, at government offices, and via social media: young people are calling for gun control on a national scale. The movement is everywhere, and weâ€™ve tracked the story from its tragic beginnings to the latest call to action.</p>
      <p>Youth Radio has created an <a href="https://yri.youthradio.org/neveragain/" target="blank"> interactive, real-time tracker</a> of the #NeverAgain movement. </p>
      <p>You're challenged with creating an app that shows what's happening on Twitter in any given location on a map.</p>
      <p>Click connect your app to start building your app!</p>
    </div>

    <h3>Connect your App</h3>
    <div class="setup" id="connect_app"></div>

    <h3>Map the Movement</h3>
    <div class="tutorialContainer">
      <div class="tutorialNavigationHeader"></div>

      <div class="tutorialContentPage">
        <h3>Add Components</h3>
        <p>We've started with a blank app, and need to add components.</p>
        <p>From the User Interface palette, drag in two <span class="icon" alt="label"></span>Labels and a <span class="icon" alt="notifier"></span>Notifier.</p>
        <p>Rename the labels to <b>InstructionLabel</b> and <b>LocationLabel</b>. </p>
        <p>From the Maps palette, drag in a <span class="icon" alt="map"></span>Map component, and a <span class="icon" alt="marker"></span>Marker component.</p>
        <p>Finally, from the Connectivity palette, drag in a <span class="icon" alt="web"></span>Web component.</p>
        <img class="enlargeImage" src="../images/map_the_movement/componentslist.png" alt="some_text">
      </div>

      <div class="tutorialContentPage">
        <h3>Modify Component Properties</h3>
        <p>Change the text of the <b>InstructionLabel</b> to say 'Tap anywhere on the map to see the Never Again action on Twitter!'</p>
        <p>Change the text of the <b>LocationLabel</b> to say 'No Location Selected!'</p>
        <p>Experiment with the text properties of the two labels until you find something you like. Adjust the map to a comfortable size as well. A sample layout is shown below.</p>
        <p>Remember, to center all components, set the <em>AlignHorizontal</em> propery of Screen1 to Center!</p>
        <img class="enlargeImage" src="../images/map_the_movement/samplelayout.png" alt="some_text">
      </div>

      <div class="tutorialContentPage">
        <h3>Introduction to API's</h3>
        <p>An <b>API</b> is an <b>A</b>pplication <b>P</b>rogramming <b>I</b>nterface.</p>
        <p>Just like every sport has a playbook, every web application has an API (a rulebook) for users (or players). API's provide the rules for how to speak to specific applications.</p>
        <img class="enlargeImage" src="../images/map_the_movement/rules.jpg" alt="some_text">
        <p>In this tutorial, we will use an API provided by Open Street Map. This API will allow us to convert a latitude/longitude to a town or city.</p>
        <p>There are multiple ways to communicate with an API. Here, we will be using a method called "get".</p>
      </div>

      <div class="tutorialContentPage">
        <h3>Blocks</h3>
        <p>Switch to the Blocks Editor.</p>
        <img class="enlargeImage" src="../images/howTos/goToBlocks.png" alt="some_text">
        <p>From the <span class="icon" alt="map"></span>Map1 drawer, drag in a <span class="control">when Map1.TapAtPoint</span> block.</p>
        <img class="enlargeImage" src="../images/map_the_movement/tapatpoint.png" alt="some_text">
      </div>

      <div class="tutorialContentPage">
        <h3>Set Marker</h3>
        <p>From the <span class="icon" alt="marker"></span>Marker1 drawer, drag in a <span class="procedure">call Marker1.SetLocation</span> block.</p>
        <img class="enlargeImage" src="../images/map_the_movement/setlocation.png" alt="some_text">
        <p>Fill in the <b>latitude</b> and <b>longitude</b> of the new block with the <span class="variables">latitude</span> and <span class="variables">longitude</span> from the Tap block.</p>
        <img class="enlargeImage" src="../images/map_the_movement/filllatlong.png" alt="some_text">
      </div>

      <div class="tutorialContentPage">
        <h3>Construct API Call</h3>
        <p>From the <span class="icon" alt="web"></span>Web1 drawer, drag in the <span class="setters">set Web1.Url</span> block, and snap it under the <span class="procedures">SetLocation</span> block.</p>
        <img class="enlargeImage" src="../images/map_the_movement/seturl.png" alt="some_text">
        <p>From the <span class="icon" alt="text"></span>Text drawer, drag in a <span class="text">join</span> block as well as a few empty text blocks. <b>Mutate</b> the <span class="text">join</span> block to have five sockets rather than two.</p>
        <img class="enlargeImage" src="../images/map_the_movement/join5.png" alt="some_text">
        <p>Fill in the five sockets of the <span class="text">join</span> block as follows:
        <ul>
          <li><span class="text">https://nominatim.openstreetmap.org/search?format=jsonv2&q=</span></li>
          <li><span class="variables">get latitude</span></li>
          <li><span class="text">,</span></li>
          <li><span class="variables">get longitude</span></li>
          <li><span class="text">&addressdetails=1</span></li>
        </ul></p>
        <img class="enlargeImage" src="../images/map_the_movement/join5filled.png" alt="some_text">
      </div>

      <div class="tutorialContentPage">
        <h3>Make API Call!</h3>
        <p>From the <span class="icon" alt="web"></span>Web1 drawer, drag out a <span class="procedures">call Web1.Get</span> block, and snap it under the <span class="setters">set Url</span> block.</p>
        <img class="enlargeImage" src="../images/map_the_movement/webget.png" alt="some_text">
      </div>

      <div class="tutorialContentPage">
        <h3>Parse Web Response</h3>
        <p>From the <span class="icon" alt="web"></span>Web1 drawer, pull out a <span class="control">when Web1.GotText</span> block.</p>
        <p>There are four values available. The one we care about is <span class="variables">responseContent</span>, which contains the full "answer" from the API.</p>
        <img class="enlargeImage" src="../images/map_the_movement/webgottext.png" alt="some_text">
        <p>Pull out a <span class="setters">set LocationLabel.Text</span> block and snap it into the <span class="control">GotText</span> block.</p>
        <img class="enlargeImage" src="../images/map_the_movement/setlocationlabel.png" alt="some_text">
      </div>

      <div class="tutorialContentPage">
        <h3>Look Up In Pairs</h3>
        <p>The <span class="lists">look up in pairs</span> block assumes that we are searching through a list of <b>key-value pairs</b>. This block takes three inputs: a key to search for, the pairs to search through, and what to return if the key is not found (and therefore there is no value to return).</p>
        <p>In this project, we will search through pairs returned by the API for a key called "city". If "city" is not available, we want to search for "town". If neither is available, we will search for "county". If there is no county available, then we will return an error.</p>
        <p>From the <span class="icon" alt="lists"></span>Lists drawer, drag in the <span class="lists">look up in pairs</span> block and snap it into the <span class="setters">set text</span> block.</p>
        <img class="enlargeImage" src="../images/map_the_movement/lookupinpairs.png" alt="some_text">
      </div>

      <div class="tutorialContentPage">
        <h3>JSON Text Decode</h3>
        <p>The API provided us a response, but it provided it to us in a format called "JSON" (pronounced 'jay-sohn').</p>
        <p>From the <span class="icon" alt="web"></span>Web1 drawer, pull out a <span class="procedures">call Web1.JsonTextDecode</span> block. Drag <span class="variables">get responseContent</span> into this new block.</p>
        <p>This will turn the response from JSON into lists that we can manipulate with App Inventor.</p>
        <img class="enlargeImage" src="../images/map_the_movement/jsontextdecode.png" alt="some_text">
        <p>What does that response look like, as a list?</p>
        <img class="enlargeImage" src="../images/map_the_movement/jsonresponse.png" alt="some_text">
        <p>It will take some complicated <em>parsing</em> to extract the <em>feature</em> we are looking for--that is, the name of the town that we just clicked on.</p>
      </div>

      <!--<div class="tutorialContentPage">
        <h3>Getting the City/Town Name from the Response Content</h3>
        <p>With the combination of <span class="lists">select list item</span> and <span class="lists">look up in pairs</span>, we can pull out the city name from the response content. If the city cannot be found, we will use the same process again to find the town name. If there is no town name either, then we will return the county name. Finally, if no county name is found, then we will return an error.</p>
        <p>Drag in five more <span class="lists">look up in pairs</span> blocks.</p>
        <p>Drag in three <span class="lists">select list item</span> blocks.</p>
        <p>Drag in ten empty text blocks and three number blocks.</p>
        <p>Finally, duplicate the JsonTextDecode block two more times.</p>
        <img class="enlargeImage" src="../images/map_the_movement/lotsofblocks.png" alt="some_text">
      </div>

      <div class="tutorialContentPage">
        <h3>Parsing Response Content, Continued</h3>
        <p>Now we have all the blocks--let's snap them all together.</p>
        <p>Set all three number blocks to <span class="math">1</span>.</p>
        <p>For the text blocks, there should be four blocks that say <span class="text">error</span>, three that say <span class="text">address</span>, one that says <span class="text">city</span>, one that says <span class="text">town</span>, and one that says <span class="text">county</span>.</p>
        <img class="enlargeImage" src="../images/map_the_movement/numbersandtext.png" alt="some_text">
        <p>By setting the <b>not found</b> parameter to another <span class="lists">look up in pairs</span> block, we can search for multiple values if one is not found, similar to how a <b>switch statement</b> works in other languages.</p>
        <p>Following the images below, connect all the blocks together.</p>
        <img class="enlargeImage" src="../images/map_the_movement/parse1.png" alt="some_text">
        <img class="enlargeImage" src="../images/map_the_movement/parse3.png" alt="some_text">
        <img class="enlargeImage" src="../images/map_the_movement/parse2.png" alt="some_text">
      </div>-->

      <div class="tutorialContentPage">
        <h3>Parsing Response Content</h3>
        <p>With the combination of <span class="lists">select list item</span> and <span class="lists">look up in pairs</span>, we can pull out the city name from the response content. If the city cannot be found, then we will return an error.</p>
        <p>Drag in one <span class="lists">select list item</span> block.</p>
        <p>Drag in two <span class="lists">look up in pairs</span> blocks.</p>
        <p>Drag in four empty text blocks and one number block.</p>
        <p>Now that we have all the blocks, let's snap them all together, as shown in the below image.</p>
        <img class="enlargeImage" src="../images/map_the_movement/parsecity.png" alt="some_text">
      </div>


      <div class="tutorialContentPage">
        <h3>Test for Error</h3>
        <p>Drag in an <span class="control">if then</span> block, and mutate it into an <span class="control">if then else</span> block.</p> 
        <p>Drag out an <span class="logic">=</span> block from the <span class="icon" alt="logic"></span>Logic drawer.</p>
        <p>From the <span class="icon" alt="label"></span>LocationLabel drawer, drag out a <span class="getters">LocationLabel.Text</span> block and snap it into the first socket of the <span class="logic">=</span> block.</p>
        <p>Set the second socket of the <span class="logic">=</span> block to <span class="text">error</span>.</p>
        <p>In the <span class="control">then</span> socket, drag in a <span class=procedures">call Notifier1.ShowAlert</span> block. Set the <b>notice</b> to <span class="text">Error finding location! Try tapping somewhere else.</span></p>
        <img class="enlargeImage" src="../images/map_the_movement/ifthenelse.png" alt="some_text">
      </div>

      <div class="tutorialContentPage">
        <h3>Open New Screen</h3>
        <p>If there's no error, then we can open a new screen to show tweets from the location that we parsed.</p>
        <p>From the <span class="icon" alt="control"></span>Control drawer, drag in a <span class="control">open another screen with start value</span> block.</p>
        <p>Set the <b>screenName</b> to <span class="text">WebScreen</span>.</p>
        <p>Set the <b>startValue</b> to <span class="getters">LocationLabel.Text</span>.</p>.
        <img class="enlargeImage" src="../images/map_the_movement/openanotherscreen.png" alt="some_text">
      </div>

      <div class="tutorialContentPage">
        <h3>Create New Screen</h3>
        <p>At the top right, click on "Add Screen". Call this new screen "WebScreen".</p>
        <img class="enlargeImage" src="../images/map_the_movement/addnewscreen.png" alt="some_text">
        <p>In the Designer, add two components: a Button, and a WebViewer (both under User Interface).</p>
        <p>Rename the button to BackButton, and fill in the text to say "Go Back".</p>
        <img class="enlargeImage" src="../images/map_the_movement/webscreen.png" alt="some_text">
      </div>

      <div class="tutorialContentPage">
        <h3>Back Button</h3>
        <p>Drag in a <span class="control">when BackButton.Click</span> block.</p>
        <p>From the Control drawer, drag in a <span class="control">close screen</span> block, and snap it into the Back Button event handler.</p>
        <img class="enlargeImage" src="../images/map_the_movement/backbutton.png" alt="some_text">
      </div>

      <div class="tutorialContentPage">
        <h3>Web Screen Initialization</h3>
        <p>From the WebScreen drawer, drag in a <span class="control">when WebScreen.Initialize</span> block.</p>
        <p>From the <span class="icon" alt="webviewer"></span>WebViewer1 drawer, drag out a <span class="procedures">call WebViewer1.GoToUrl</span> block, and snap it in.</p>
        <img class="enlargeImage" src="../images/map_the_movement/webinitialize.png" alt="some_text">
      </div>

      <div class="tutorialContentPage">
        <h3>Fill in URL</h3>
        <p>Drag out a <span class="text">join</span> block, and mutate it to have three sockets.</p>
        <p>In the first socket, enter: <span class="text">https://m.twitter.com/search?q=%23NeverAgain%20%23</span>.</p>
        <p>In the third socket, enter: <span class="text">&src=typd</span>.</p>
        <p>For the second socket, we need to make sure that the location name doesn't have any spaces in it. We will do this in the next step.</p>
        <img class="enlargeImage" src="../images/map_the_movement/gotourl.png" alt="some_text">
      </div>

      <div class="tutorialContentPage">
        <h3>Remove Spaces from Location Name</h3>
        <p>Drag out a <span class="text">replace all text</span> block and snap it into the second socket of the <span class="text">join</span> block of the previous step.</p> 
        <p>From the Control drawer, drag in a <span class="control">get start value</span> block. This goes into the <b>text</b> socket.</p>
        <p>In a new empty text block, enter a space character. This goes into the <b>segment</b> socket.</p>
        <p>In a new empty text block, make sure it is completely empty--no spaces. This goes into the <b>replacement</b> socket.</p>
        <img class="enlargeImage" src="../images/map_the_movement/replacetext.png" alt="some_text">
      </div>

      <div class="tutorialContentPage">
        <h3>Test!</h3>
        <p>When you tap on the map on the first screen, it should open the second screen with a list of #NeverAgain tweets from that location. Does your app work?</p>
        <img class="enlargeImage" src="../images/map_the_movement/finishedscreenshots.png" alt="some_text">
      </div>

      <br/>
      <div class="tutorialNextButtonContainer" style="width:100%;text-align:center;">
        <button type="button" class="btn btn-success btn-lg tutorialNextButton" style="font-size:24pt;">Next Step</button>
      </div>
    </div>

   <!-- <h3>Expand your app</h3>
    <div>
    </div>

  <h3>Share your App</h3>
  <div class="setup" id="share_app"></div>

  <h3>Published apps</h3>
  <div>
    <div id="container">
     <div class="projectbox"> 
      <img src="https://farm3.staticflickr.com/2510/32777057931_d96656a03d_m.jpg" alt="some_text" class="projectimage" />
      <div class="projecttext"><span> Hello World</span> </div>
    </div>
  </div>
</div> -->
</div>

<div id="howToAccordion" class="accordion" style="display:none">
</div>


<div id="serverTutorialId" style="display:none;">5</div>
</body>
<script src="../scripts/tabHandler.js"></script>
<script src="../scripts/tutorialPage.js"></script>
<script src="../scripts/shareAndPublish.js"></script>

</html>
